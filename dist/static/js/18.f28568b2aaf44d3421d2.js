webpackJsonp([18],{1010:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),t._v(" 交易")]),t._v(" "),a("el-breadcrumb-item",[t._v("交易列表")])],1)],1),t._v(" "),a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"plus"},on:{click:t.handleTopAdd}},[t._v("我要卖出")])],1),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.data,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"selleruid",label:"selleruid",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"buyeruid",label:"buyeruid",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"target",label:"target",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"status",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"price",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"amount",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"date",formatter:t.formatter}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("我要买入")])]}}])})],1),t._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"digcont",attrs:{title:"添加卖单",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"价格",prop:"price","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"diainp",attrs:{"auto-complete":"off"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"数量",prop:"amount","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"diainp",attrs:{"auto-complete":"off"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleAdd("form")}}},[t._v("确 认")])],1)],1),t._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"digcont",attrs:{title:"确认买单",visible:t.dialogFormVisible2},on:{"update:visible":function(e){t.dialogFormVisible2=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"数量",prop:"amount","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"diainp",attrs:{"auto-complete":"off"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible2=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleChange("form")}}},[t._v("确 认")])],1)],1)],1)},staticRenderFns:[]}},1040:function(t,e,a){var o=a(688);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(196)("21f26953",o,!0)},521:function(t,e,a){a(1040);var o=a(197)(a(582),a(1010),"data-v-5618fc82",null);t.exports=o.exports},582:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="http://localhost:4000/";o="/",e.default={data:function(){return{dialogFormVisible:!1,dialogFormVisible2:!1,form:{price:"",amount:"",result:""},rules:{price:[{required:!0,message:"请输入购买价格",trigger:"blur"},{validator:this.validateSpace,trigger:"blur"}],amount:[{required:!0,message:"请输入购买数量",trigger:"blur"},{validator:this.validateSpace,trigger:"blur"}]},tableData:[],cur_page:1,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,loading:!1}},created:function(){this.getData()},computed:{data:function(){var t=this;return t.tableData.filter(function(e){console.log("date="+e.toString());for(var a=!1,o=0;o<t.del_list.length;o++)if(e._id===t.del_list[o]._id){a=!0;break}if(!a&&e.date.indexOf(t.select_cate)>-1&&(e._id.indexOf(t.select_word)>-1||e.date.indexOf(t.select_word)>-1))return e})}},methods:{handleCurrentChange:function(t){this.cur_page=t,this.getData()},getData:function(){var t=this,e=localStorage.getItem("uid"),a=o+"orders/?uid="+e;t.$axios.get(a).then(function(e){"1000"==e.data.code?t.$router.replace("/Login"):t.tableData=e.data.list})},search:function(){this.is_search=!0},formatter:function(t,e){return t.date},filterTag:function(t,e){return e.tag===t},handleTopAdd:function(t,e){this.dialogFormVisible=!0},handleEdit:function(t,e){var a=this,o=a.tableData[t];console.log(o._id),localStorage.setItem("dbid",o._id),a.form.amount=o.amount,localStorage.setItem("amount",o.amount),localStorage.setItem("selleruid",o.selleruid),0==o.status?a.dialogFormVisible2=!0:a.$message.success("不可下单")},handleChange:function(t,e){var a=this,l=localStorage.getItem("dbid"),i=localStorage.getItem("uid"),r=a.form.amount,s=localStorage.getItem("amount"),n=localStorage.getItem("selleruid"),d=void 0;d=r==s?o+"orders/?type=3&uid="+i+"&dbid="+l:o+"orders/?type=6&uid="+i+"&dbid="+l+"&amount="+r+"&suid="+n,a.$axios.get(d).then(function(t){console.log("GET-"+t.data.code),console.log("GET-"+t.data.msg),200==t.data.code?(a.dialogFormVisible2=!1,a.$axios.get(o+"orders/?type=4&uid="+n).then(function(t){a.$message.success(t.data.msg),location.reload()})):(a.dialogFormVisible2=!1,a.$message.success(t.data.msg))})},handleAdd:function(t){var e=this;e.$refs[t].validate(function(t){if(!t)return!1;console.log("验证成功");var a=e.form.price,l=e.form.amount,i=localStorage.getItem("uid"),r=o+"orders/?type=2&uid="+i+"&amount="+l+"&price="+a;e.$axios.get(r).then(function(t){console.log("GET-"+t.data.code),console.log("GET-"+t.data.msg),200==t.data.code?(e.dialogFormVisible=!1,e.$message.success(t.data.msg),location.reload()):(e.dialogFormVisible=!1,e.$message.success(t.data.msg))})})},delAll:function(){this.$message("未实现")},handleSelectionChange:function(t){this.multipleSelection=t}}}},688:function(t,e,a){e=t.exports=a(87)(void 0),e.push([t.i,".handle-box[data-v-5618fc82]{margin-bottom:20px}.handle-select[data-v-5618fc82]{width:120px}.handle-input[data-v-5618fc82]{width:300px;display:inline-block}",""])}});