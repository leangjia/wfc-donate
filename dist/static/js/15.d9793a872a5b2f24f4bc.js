webpackJsonp([15],{1013:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v(" 投注")]),e._v(" "),a("el-breadcrumb-item",[e._v("游戏列表")])],1)],1),e._v(" "),a("div",{staticClass:"handle-box"},[a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"plus"},on:{click:e.handleTopAdd}},[e._v("添加游戏")]),e._v(" "),a("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary"},on:{click:e.handleTopHide}},[e._v("显示隐藏")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.data,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"gameid",label:"游戏id",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gamename",label:"主队VS客队",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gamedesc",label:"让球",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startdate",label:"开始日期",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"enddate",label:"结算日期",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"resultscript",label:"比赛结果",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"requirescript",label:"结算状态",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"frozen",label:"冻结状态",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"投注截止日期",formatter:e.formatter}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("结果")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleFronze(t.$index,t.row)}}},[e._v("冻结")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("隐藏")])]}}])})],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"digcont",attrs:{title:"添加游戏",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"主队VS客队",prop:"gamename","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"diainp",attrs:{"auto-complete":"off"},model:{value:e.form.gamename,callback:function(t){e.$set(e.form,"gamename",t)},expression:"form.gamename"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"让球",prop:"desc","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"diainp",attrs:{"auto-complete":"off"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),a("el-form-item",[a("el-form-item",{attrs:{label:"开始时间",prop:"comment","label-width":e.formLabelWidth}}),e._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"日期"},model:{value:e.form.startdate,callback:function(t){e.$set(e.form,"startdate",t)},expression:"form.startdate"}}),e._v(" "),a("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"时间"},model:{value:e.form.starttime,callback:function(t){e.$set(e.form,"starttime",t)},expression:"form.starttime"}})],1),e._v(" "),a("el-form-item",[a("el-form-item",{attrs:{label:"冻结时间",prop:"comment","label-width":e.formLabelWidth}}),e._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"日期"},model:{value:e.form.fzdate,callback:function(t){e.$set(e.form,"fzdate",t)},expression:"form.fzdate"}}),e._v(" "),a("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"时间"},model:{value:e.form.fztime,callback:function(t){e.$set(e.form,"fztime",t)},expression:"form.fztime"}})],1),e._v(" "),a("el-form-item",[a("el-form-item",{attrs:{label:"结算时间",prop:"comment","label-width":e.formLabelWidth}}),e._v(" "),a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"日期"},model:{value:e.form.enddate,callback:function(t){e.$set(e.form,"enddate",t)},expression:"form.enddate"}}),e._v(" "),a("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"时间"},model:{value:e.form.endtime,callback:function(t){e.$set(e.form,"endtime",t)},expression:"form.endtime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleAdd("form")}}},[e._v("添 加")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"digcont",attrs:{title:"游戏结果修改",visible:e.dialogFormVisible2},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"此游戏最终结果",prop:"result","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"此游戏最终结果"},model:{value:e.form.result,callback:function(t){e.$set(e.form,"result",t)},expression:"form.result"}},[a("el-option",{key:"1",attrs:{label:"胜",value:"1"}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"平",value:"2"}}),e._v(" "),a("el-option",{key:"3",attrs:{label:"负",value:"3"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible2=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleChange("form")}}},[e._v("修 改")])],1)],1)],1)},staticRenderFns:[]}},1043:function(e,t,a){var l=a(691);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(196)("23f27e13",l,!0)},509:function(e,t,a){a(1043);var l=a(197)(a(570),a(1013),"data-v-6831dd18",null);e.exports=l.exports},541:function(e,t,a){e.exports={default:a(542),__esModule:!0}},542:function(e,t,a){var l=a(64),o=l.JSON||(l.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},570:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(541),o=a.n(l),i="http://localhost:4000/";i="/",t.default={data:function(){return{dialogFormVisible:!1,dialogFormVisible2:!1,form:{gamename:"",desc:"",startdate:"",starttime:"",enddate:"",endtime:"",fzdate:"",fztime:"",result:""},rules:{gamename:[{required:!0,message:"请输入游戏名称",trigger:"blur"},{validator:this.validateSpace,trigger:"blur"}],desc:[{required:!0,message:"请输入游戏描述",trigger:"blur"},{validator:this.validateSpace,trigger:"blur"}],result:[{required:!0,message:"请输入游戏结果",trigger:"blur"},{validator:this.validateSpace,trigger:"blur"}]},tableData:[],cur_page:1,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,loading:!1,hide:!0}},created:function(){this.getData()},computed:{data:function(){var e=this;return e.tableData.filter(function(t){console.log("date="+t.toString());for(var a=!1,l=0;l<e.del_list.length;l++)if(t._id===e.del_list[l]._id){a=!0;break}if(!a&&t.date.indexOf(e.select_cate)>-1&&(t._id.indexOf(e.select_word)>-1||t.date.indexOf(e.select_word)>-1))return t})}},methods:{handleCurrentChange:function(e){this.cur_page=e,this.getData()},getData:function(){var e=this,t=localStorage.getItem("uid"),a=e.hide,l=void 0;l=a?i+"games/?uid="+t+"&hide=0":i+"games/?uid="+t+"&hide=1",e.$axios.get(l).then(function(t){"1000"==t.data.code?e.$router.replace("/Login"):(console.log(t.data.list),console.log(t.status),console.log(t.statusText),console.log(t.headers),console.log(t.config),e.tableData=t.data.list)})},search:function(){this.is_search=!0},formatter:function(e,t){return e.date},filterTag:function(e,t){return t.tag===e},handleTopAdd:function(e,t){var a=this,l=this,o=i+"games/?type=3";l.$axios.get(o).then(function(e){console.log("GET-"+e.data.code),console.log("GET-"+e.data.msg),200==e.data.code?(localStorage.setItem("gameid",e.data.msg),console.log("SETGID-"+e.data.msg),l.dialogFormVisible=!0):a.$message("服务器故障请稍后重试")})},handleTopHide:function(e,t){var a=this;a.hide=!a.hide,console.log("self.hide-"+a.hide),a.getData()},handleEdit:function(e,t){var a=this,l=a.tableData[e];console.log(l.gameid);localStorage.getItem("uid");localStorage.setItem("dbid",l._id),a.dialogFormVisible2=!0},handleChange:function(e,t){var a=this,l=localStorage.getItem("dbid"),s=localStorage.getItem("uid"),r={resultscript:a.form.result};this.$message("修改 dbid="+l);var d=i+"games/?type=5&uid="+s+"&dbid="+l+"&obj="+o()(r);a.$axios.get(d).then(function(e){console.log("GET-"+e.data.code),console.log("GET-"+e.data.msg),200==e.data.code?(a.dialogFormVisible=!1,location.reload()):a.dialogFormVisible=!1})},handleFronze:function(e,t){var a=this,l=a.tableData[e];console.log(l._id);var o=localStorage.getItem("uid");this.$message("冻结 gameid="+l._id);var s=i+"games/"+l._id+"/?uid="+o+"&del=0";console.log("url="+s),a.$axios.post(s).then(function(e){console.log("GET-"+e.data.code),console.log("GET-"+e.data.msg),200==e.data.code?(a.dialogFormVisible=!1,location.reload()):a.dialogFormVisible=!1})},handleDelete:function(e,t){var a=this,l=a.tableData[e];console.log(l._id);var o=localStorage.getItem("uid");this.$message("冻结 gameid="+l._id);var s=i+"games/"+l._id+"/?uid="+o+"&del=1";console.log("url="+s),a.$axios.post(s).then(function(e){console.log("GET-"+e.data.code),console.log("GET-"+e.data.msg),200==e.data.code?(a.dialogFormVisible=!1,location.reload()):a.dialogFormVisible=!1})},delAll:function(){this.$message("未实现")},handleAdd:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;console.log("验证成功");var a=localStorage.getItem("uid"),l=localStorage.getItem("gameid"),s=t.form.gamename,r=t.form.desc,d=t.form.startdate,n=t.form.starttime,c=t.form.enddate,m=t.form.endtime,u=t.form.fzdate,g=t.form.fztime;d.setHours(n.getHours()),d.setMinutes(n.getMinutes()),d.setSeconds(n.getSeconds()),u.setHours(g.getHours()),u.setMinutes(g.getMinutes()),u.setSeconds(g.getSeconds()),c.setHours(m.getHours()),c.setMinutes(m.getMinutes()),c.setSeconds(m.getSeconds()),console.log("gameid="+l),console.log("gamename="+s),console.log("desc="+r),console.log("stdate="+d),console.log("enddate="+c);var f={gameid:l,gamename:s,gamedesc:r,startdate:d,enddate:c,date:u};console.log("obj="+o()(f));var p=i+"games/?type=4&uid="+a+"&obj="+o()(f);t.$axios.get(p).then(function(e){console.log("GET-"+e.data.code),console.log("GET-"+e.data.msg),200==e.data.code?(t.dialogFormVisible=!1,location.reload()):t.dialogFormVisible=!1})})},handleSelectionChange:function(e){this.multipleSelection=e}}}},691:function(e,t,a){t=e.exports=a(87)(void 0),t.push([e.i,".handle-box[data-v-6831dd18]{margin-bottom:20px}.handle-select[data-v-6831dd18]{width:120px}.handle-input[data-v-6831dd18]{width:300px;display:inline-block}",""])}});