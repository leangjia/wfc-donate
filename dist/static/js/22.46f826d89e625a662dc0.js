webpackJsonp([22],{1018:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-menu"}),e._v(" 投注")]),e._v(" "),a("el-breadcrumb-item",[e._v("投注列表")])],1)],1),e._v(" "),a("div",{staticClass:"handle-box"}),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.data,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"gameid",label:"游戏id",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gamename",label:"主队VS客队",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gamedesc",label:"让球",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startdate",label:"开始日期",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"enddate",label:"结算日期",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"resultscript",label:"比赛结果",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"requirescript",label:"结算状态",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"投注截止日期",formatter:e.formatter}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("投注")])]}}])})],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"digcont",attrs:{title:"投注",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"投注类型",prop:"chip_type","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"投注类型"},model:{value:e.form.chip_type,callback:function(t){e.$set(e.form,"chip_type",t)},expression:"form.chip_type"}},[a("el-option",{key:"1",attrs:{label:"胜",value:"1"}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"平",value:"2"}}),e._v(" "),a("el-option",{key:"3",attrs:{label:"负",value:"3"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"投注金额",prop:"chip_vendor","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"diainp",attrs:{"auto-complete":"off"},model:{value:e.form.chip_vendor,callback:function(t){e.$set(e.form,"chip_vendor",t)},expression:"form.chip_vendor"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"comment","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"diainp",attrs:{"auto-complete":"off"},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveAdd("form")}}},[e._v("添 加")])],1)],1)],1)},staticRenderFns:[]}},1047:function(e,t,a){var l=a(695);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(196)("027a61d1",l,!0)},506:function(e,t,a){a(1047);var l=a(197)(a(567),a(1018),"data-v-be97bd16",null);e.exports=l.exports},567:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l="http://localhost:4000/";l="/",t.default={data:function(){return{dialogFormVisible:!1,form:{chip_type:"1",chip_vendor:"",comment:""},rules:{chip_type:[{required:!0,message:"请输入投注类型",trigger:"blur"},{validator:this.validateSpace,trigger:"blur"}],chip_vendor:[{required:!0,message:"请输入投注金额",trigger:"blur"},{validator:this.validateSpace,trigger:"blur"}]},tableData:[],cur_page:1,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,loading:!1}},created:function(){this.getData()},computed:{data:function(){var e=this;return e.tableData.filter(function(t){console.log("date="+t.toString());for(var a=!1,l=0;l<e.del_list.length;l++)if(t._id===e.del_list[l]._id){a=!0;break}if(!a&&t.date.indexOf(e.select_cate)>-1&&(t._id.indexOf(e.select_word)>-1||t.date.indexOf(e.select_word)>-1))return t})}},methods:{handleCurrentChange:function(e){this.cur_page=e,this.getData()},getData:function(){var e=this,t=localStorage.getItem("uid"),a=l+"games/?uid="+t;e.$axios.get(a).then(function(t){"1000"==t.data.code?e.$router.replace("/Login"):(console.log(t.data.list),console.log(t.status),console.log(t.statusText),console.log(t.headers),console.log(t.config),e.tableData=t.data.list)})},search:function(){this.is_search=!0},formatter:function(e,t){return e.date},filterTag:function(e,t){return t.tag===e},handleEdit:function(e,t){var a=this,o=this,i=o.tableData[e];console.log(i.frozen);var r=localStorage.getItem("uid");if("1"==i.frozen)this.$message.success("游戏以冻结无法投注");else{var s=l+"games/?type=2&uid="+r+"&gameid="+i.gameid;console.log("url="+s),o.$axios.get(s).then(function(e){console.log("GET-"+e.data.code),console.log("GET-"+e.data.password),console.log("GET-"+e.data.msg),200==e.data.code?(localStorage.setItem("gameid",i.gameid),o.dialogFormVisible=!0):a.$message.success(e.data.msg)})}},handleDelete:function(e,t){this.$message.error("删除第"+(e+1)+"行")},delAll:function(){this.$message("未实现"),self.$message.error("删除了"+str),self.multipleSelection=[]},saveAdd:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;console.log("验证成功"),t.loading=!0;var a=localStorage.getItem("uid"),o=localStorage.getItem("gameid");t.loading=!0;var i=1e8*t.form.chip_vendor,r=l+"games/?type=1&uid="+a+"&gameid="+o+"&vtype="+t.form.chip_type+"&vval="+i+"&vcom="+t.form.comment;t.$axios.get(r).then(function(e){t.loading=!1,console.log("GET-"+e.data.code),console.log("GET-"+e.data.msg),200==e.data.code?(t.$message("投注成功"),t.form.chip_type="1",t.form.chip_vendor="",t.form.comment="",t.dialogFormVisible=!1):(t.loading=!1,t.dialogFormVisible=!1,t.$message(e.data.msg))})})},handleSelectionChange:function(e){this.multipleSelection=e}}}},695:function(e,t,a){t=e.exports=a(87)(void 0),t.push([e.i,".handle-box[data-v-be97bd16]{margin-bottom:20px}.handle-select[data-v-be97bd16]{width:120px}.handle-input[data-v-be97bd16]{width:300px;display:inline-block}",""])}});